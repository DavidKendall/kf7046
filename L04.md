---
layout: default
title: Caching DNS server
license: not needed
---

# Introduction

Your aim in this lab is to:

* Install a bind9 server on your server VM.
* Configure bind9 as a caching server with forwarders
* Identify and understand the network activity generated by a DNS lookup to your server.

# Instructions

1. Make sure that your PC is running Ubuntu, is connected to the CNT network and that the network interface can be configured by the DHCP server. See the CNT Student Guide if you need help with this.
1. Read through the [official Ubuntu documentation on installation and configuration of DNS](https://help.ubuntu.com/lts/serverguide/dns.html) (just up to the end of the section on caching nameserver).
1. Install bind9 and dnsutils on your server VM via a ssh connection from your desktop VM.

   ```sh
   $ sudo apt-get install bind9 dnsutils
   ```
1. Configure the server to support caching from a DNS Server
    * Two DNS servers are available in the CNT lab: 192.168.100.1 and 192.168.100.254
    * Configure your server to use them in the following order:
            192.168.100.1
            192.168.100.254
1. Using a desktop VM, ensure its nameserver is set to 192.168.100.1. Start a Wireshark session with the filter set to dns. Execute the command:

   ```sh
   $ dig www.google.com
   ```
Identify and note the traffic between your desktop VM and the DNS Server.
1. Using a desktop VM, ensure its nameserver is set to the IP address of your DNS server. Start a Wireshark session with the filter set to dns. Execute the commands:

   ```sh
   $ dig www.google.com
   $ dig www.student.co.uk
   ```
Identify and note the traffic between your desktop VM and the DNS Server. Compare your observation of the traffic this time with your earlier observation. Explain your observations.
1. Leave your Wireshark session running and repeat the previous searches. Identify and note the traffic between your desktop VM and the DNS Server. Compare your observation of the traffic this time with your earlier observation. Explain your observations.
1. You should keep a copy of this server as it will be used in later practical to build your fault tolerant environment.

Note
<br/>
Instead of using the local DNS servers at 192.168.100.[1|254], you can use public DNS servers. For example, see:
* [Google Public DNS](https://developers.google.com/speed/public-dns/)
* [OpenDNS](http://www.opendns.com/)

